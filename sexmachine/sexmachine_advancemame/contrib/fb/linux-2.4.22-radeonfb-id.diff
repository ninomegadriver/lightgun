--- linux-2.4.22/drivers/video/radeonfb.c.ori	2003-08-26 20:32:44.000000000 +0200
+++ linux-2.4.22/drivers/video/radeonfb.c	2004-04-17 22:01:54.000000000 +0200
@@ -278,6 +278,11 @@
 	{ "9600 AR", RADEON_RV350 },
 };
 
+#define CHIPSET_R200 RADEON_QL
+#define CHIPSET_RV280 RADEON_Y_
+#define CHIPSET_R300 RADEON_AE
+#define CHIPSET_R350 RADEON_NH
+#define CHIPSET_RV350 RADEON_AP
 
 enum radeon_montype
 {
@@ -291,44 +296,81 @@
 
 
 static struct pci_device_id radeonfb_pci_table[] __devinitdata = {
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_QD, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_QD},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_QE, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_QE},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_QF, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_QF},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_QG, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_QG},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_QY, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_QY},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_QZ, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_QZ},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_LW, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_LW},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_LX, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_LX},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_LY, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_LY},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_LZ, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_LZ},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_QL, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_QL},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_QN, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_QN},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_QO, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_QO},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_Ql, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_Ql},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_BB, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_BB},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_QM, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_QM},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_QW, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_QW},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_QX, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_QX},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_Id, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_Id},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_Ie, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_Ie},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_If, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_If},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_Ig, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_Ig},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_Ld, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_Ld},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_Le, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_Le},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_Lf, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_Lf},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_Lg, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_Lg},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_ND, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_ND},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_NE, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_NE},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_NF, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_NF},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_NG, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_NG},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_AE, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_AE},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_AF, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_AF},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_NH, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_NH},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_NI, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_NI},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_Y_, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_Y_},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_AD, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_AD},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_AP, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_AP},
-	{ PCI_VENDOR_ID_ATI, PCI_DEVICE_ID_ATI_RADEON_AR, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_AR},
+	{ PCI_VENDOR_ID_ATI, 0x4144, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_AD }, /* Radeon 9500 Series (R300) */
+	{ PCI_VENDOR_ID_ATI, 0x4145, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_AE }, /* Radeon 9700 (R300) */
+	{ PCI_VENDOR_ID_ATI, 0x4146, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_AF }, /* Radeon 9700 (R300) */
+	{ PCI_VENDOR_ID_ATI, 0x4147, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_R300 }, /* FireGL Z1 AG (AGP) */
+	{ PCI_VENDOR_ID_ATI, 0x4148, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_R350 }, /* Radeon 9800SE AH (AGP) */
+	{ PCI_VENDOR_ID_ATI, 0x4149, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_R350 }, /* Radeon 9800 AI (AGP) */
+	{ PCI_VENDOR_ID_ATI, 0x414A, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_R350 }, /* Radeon 9800 AJ (AGP) */
+	{ PCI_VENDOR_ID_ATI, 0x414B, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_R350 }, /* FireGL X2 AK (AGP) */
+	{ PCI_VENDOR_ID_ATI, 0x4150, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_AP }, /* Radeon 9600 Series (V350) */
+	{ PCI_VENDOR_ID_ATI, 0x4151, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_RV350 }, /* Radeon 9600SE AQ (AGP) */
+	{ PCI_VENDOR_ID_ATI, 0x4152, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_AR }, /* Radeon 9600 XT (V350) */
+	{ PCI_VENDOR_ID_ATI, 0x4153, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_RV350 }, /* Radeon 9600 AS (AGP) */
+	{ PCI_VENDOR_ID_ATI, 0x4154, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_RV350 }, /* FireGL T2 AT (AGP) */
+	{ PCI_VENDOR_ID_ATI, 0x4155, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_RV350 }, /* RV350 AU [Fire GL T2] */
+	{ PCI_VENDOR_ID_ATI, 0x4156, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_RV350 }, /* FireGL RV360 AV (AGP) */
+	{ PCI_VENDOR_ID_ATI, 0x4157, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_RV350 }, /* RV350 AW [Fire GL T2] */
+	{ PCI_VENDOR_ID_ATI, 0x4242, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_BB }, /* Radeon 8500 DV */
+	{ PCI_VENDOR_ID_ATI, 0x4964, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_Id },
+	{ PCI_VENDOR_ID_ATI, 0x4965, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_Ie },
+	{ PCI_VENDOR_ID_ATI, 0x4966, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_If }, /* Radeon 9000 Series (RV250) */
+	{ PCI_VENDOR_ID_ATI, 0x4967, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_Ig }, /* Radeon 9000 (RV250) */
+	{ PCI_VENDOR_ID_ATI, 0x4c57, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_LW }, /* Radeon Mobility M7 LW */
+	{ PCI_VENDOR_ID_ATI, 0x4c58, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_LX }, /* FireGL Mobility */
+	{ PCI_VENDOR_ID_ATI, 0x4c59, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_LY }, /* Radeon Mobility M6 LY */
+	{ PCI_VENDOR_ID_ATI, 0x4c5a, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_LZ }, /* Radeon Mobility M6 LZ */
+	{ PCI_VENDOR_ID_ATI, 0x4c64, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_Ld }, /* Mobility FireGL 9000 */
+	{ PCI_VENDOR_ID_ATI, 0x4c65, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_Le },
+	{ PCI_VENDOR_ID_ATI, 0x4c66, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_Lf }, /* Mobility Radeon 9000 */
+	{ PCI_VENDOR_ID_ATI, 0x4c67, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_Lg },
+	{ PCI_VENDOR_ID_ATI, 0x4e44, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_ND }, /* Radeon 9700/Pro, 9500 Series (R300) */
+	{ PCI_VENDOR_ID_ATI, 0x4e45, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_NE }, /* Radeon 9700/9500 Series (R300) */
+	{ PCI_VENDOR_ID_ATI, 0x4e46, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_NF }, /* Radeon 9600TX (R300) */
+	{ PCI_VENDOR_ID_ATI, 0x4e47, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_NG }, /* Fire GL X1/Z1 AGP/Pro Video Accelerator (R300-WS) */
+	{ PCI_VENDOR_ID_ATI, 0x4e48, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_NH }, /* Radeon 9800 Pro (R350) */
+	{ PCI_VENDOR_ID_ATI, 0x4e49, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_NI }, /* Radeon 9800 (R350) (??) */
+	{ PCI_VENDOR_ID_ATI, 0x4e4a, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_R350 }, /* Radeon 9800 XT (R350) */
+	{ PCI_VENDOR_ID_ATI, 0x4e4b, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_R350 }, /* R350 NK [Fire GL X2] */
+	{ PCI_VENDOR_ID_ATI, 0x4e50, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_RV350 }, /* Radeon Mobility 9600 (M10) NP (AGP) */
+	{ PCI_VENDOR_ID_ATI, 0x4e51, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_RV350 }, /* Radeon Mobility 9600 (M10) NQ (AGP) */
+	{ PCI_VENDOR_ID_ATI, 0x4e52, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_RV350 }, /* Radeon Mobility 9600 (M11) NR (AGP) */
+	{ PCI_VENDOR_ID_ATI, 0x4e53, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_RV350 }, /* Radeon Mobility 9600 (M10) NS (AGP) */
+	{ PCI_VENDOR_ID_ATI, 0x4e54, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_RV350 }, /* FireGL Mobility T2 (M10) NT (AGP) */
+	{ PCI_VENDOR_ID_ATI, 0x4e56, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_RV350 }, /* FireGL Mobility T2 (M11) NV (AGP) */
+	{ PCI_VENDOR_ID_ATI, 0x5144, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_QD },
+	{ PCI_VENDOR_ID_ATI, 0x5145, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_QE },
+	{ PCI_VENDOR_ID_ATI, 0x5146, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_QF },
+	{ PCI_VENDOR_ID_ATI, 0x5147, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_QG },
+	{ PCI_VENDOR_ID_ATI, 0x5148, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_R200 }, /* Radeon R200 QH [Radeon 8500] */
+	{ PCI_VENDOR_ID_ATI, 0x5149, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_R200 }, /* Radeon R200 QI */
+	{ PCI_VENDOR_ID_ATI, 0x514a, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_R200 }, /* Radeon R200 QJ */
+	{ PCI_VENDOR_ID_ATI, 0x514b, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_R200 }, /* Radeon R200 QK */
+	{ PCI_VENDOR_ID_ATI, 0x514c, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_QL },
+	{ PCI_VENDOR_ID_ATI, 0x514d, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_QM },
+	{ PCI_VENDOR_ID_ATI, 0x514e, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_QN },
+	{ PCI_VENDOR_ID_ATI, 0x514f, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_QO },
+	{ PCI_VENDOR_ID_ATI, 0x5154, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_R200 }, /* R200 QT [Radeon 8500] */
+	{ PCI_VENDOR_ID_ATI, 0x5155, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_R200 }, /* R200 QU [Radeon 9100] */
+	{ PCI_VENDOR_ID_ATI, 0x5157, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_QW },
+	{ PCI_VENDOR_ID_ATI, 0x5158, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_QX },
+	{ PCI_VENDOR_ID_ATI, 0x5159, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_QY },
+	{ PCI_VENDOR_ID_ATI, 0x515a, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_QZ },
+	{ PCI_VENDOR_ID_ATI, 0x5168, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_R200 }, /* Radeon R200 Qh */
+	{ PCI_VENDOR_ID_ATI, 0x5169, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_R200 }, /* Radeon R200 Qi */
+	{ PCI_VENDOR_ID_ATI, 0x516a, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_R200 }, /* Radeon R200 Qj */
+	{ PCI_VENDOR_ID_ATI, 0x516b, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_R200 }, /* Radeon R200 Qk */
+	{ PCI_VENDOR_ID_ATI, 0x516c, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_Ql },
+	{ PCI_VENDOR_ID_ATI, 0x5834, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_R300 }, /* Radeon 9100 IGP (A5) 5834 */
+	{ PCI_VENDOR_ID_ATI, 0x5835, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_R300 }, /* Radeon Mobility 9100 IGP (U3) 5835 */
+	{ PCI_VENDOR_ID_ATI, 0x5960, PCI_ANY_ID, PCI_ANY_ID, 0, 0, RADEON_Y_ }, /* Radeon 9200 Pro (RV280) */
+	{ PCI_VENDOR_ID_ATI, 0x5961, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_RV280 }, /* Radeon 9200 5961 (AGP) */
+	{ PCI_VENDOR_ID_ATI, 0x5962, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_RV280 }, /* Radeon 9200 5962 (AGP) */
+	{ PCI_VENDOR_ID_ATI, 0x5963, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_RV280 },
+	{ PCI_VENDOR_ID_ATI, 0x5964, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_RV280 }, /* Radeon 9200SE 5964 (AGP) */
+	{ PCI_VENDOR_ID_ATI, 0x5C61, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_RV280 }, /* Radeon Mobility 9200 (M9+) 5C61 (AGP) */
+	{ PCI_VENDOR_ID_ATI, 0x5C63, PCI_ANY_ID, PCI_ANY_ID, 0, 0, CHIPSET_RV280 }, /* Radeon Mobility 9200 (M9+) 5C63 (AGP) */
 	{ 0, }
 };
 MODULE_DEVICE_TABLE(pci, radeonfb_pci_table);
